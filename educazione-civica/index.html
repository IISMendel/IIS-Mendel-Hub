<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piattaforma AI Educazione Civica 2024 - IIS Mendel Villa Cortese</title>
    <meta name="description" content="Piattaforma ufficiale AI per educazione civica - Aggiornata alle Linee Guida 2024">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

        :root {
            --primary-color: #2563eb;
            --secondary-color: #7c3aed;
            --accent-color: #06b6d4;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --mendel-green: #22c55e;
            --mendel-blue: #3b82f6;
            --civic-red: #dc2626;
            --civic-gold: #d97706;
            --new-2024: #8b5cf6;
            --dark-bg: #0f172a;
            --dark-card: #1e293b;
            --light-bg: #ffffff;
            --light-card: #f8fafc;
            --text-dark: #1e293b;
            --text-light: #64748b;
            --border-light: #e2e8f0;
            --border-dark: #334155;
            --shadow-light: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-large: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --gradient-civic: linear-gradient(135deg, #dc2626 0%, #d97706 100%);
            --gradient-2024: linear-gradient(135deg, #8b5cf6 0%, #06b6d4 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--gradient-civic);
            min-height: 100vh;
            color: var(--text-dark);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body.dark {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-light);
            padding: 2rem 0;
            text-align: center;
            position: relative;
            box-shadow: var(--shadow-medium);
        }

        body.dark .header {
            background: rgba(15, 23, 42, 0.95);
            border-bottom-color: var(--border-dark);
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-civic);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .school-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            background: var(--gradient-civic);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.875rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow-medium);
        }

        .update-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--gradient-2024);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.75rem;
            margin-left: 1rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .header h1 {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 800;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
            background: var(--gradient-civic);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.dark .header h1 {
            background: var(--gradient-2024);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.125rem;
            color: var(--text-light);
            font-weight: 500;
        }

        /* Controls */
        .controls-container {
            position: fixed;
            top: 2rem;
            right: 2rem;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .control-group {
            display: flex;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 0.5rem;
            border-radius: 16px;
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-medium);
        }

        body.dark .control-group {
            background: rgba(30, 41, 59, 0.95);
            border-color: var(--border-dark);
        }

        .control-btn {
            width: 48px;
            height: 48px;
            border: none;
            border-radius: 12px;
            background: var(--light-card);
            color: var(--text-dark);
            font-size: 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        body.dark .control-btn {
            background: var(--dark-card);
            color: #e2e8f0;
        }

        .control-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }

        .theme-toggle {
            background: var(--gradient-2024);
            color: white;
        }

        /* Search */
        .search-container {
            position: fixed;
            top: 2rem;
            left: 2rem;
            z-index: 1000;
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .search-wrapper {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-medium);
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            min-width: 280px;
        }

        body.dark .search-wrapper {
            background: rgba(30, 41, 59, 0.95);
            border-color: var(--border-dark);
        }

        .search-input {
            border: none;
            background: transparent;
            font-size: 1rem;
            outline: none;
            flex: 1;
            color: var(--text-dark);
            font-weight: 500;
        }

        body.dark .search-input {
            color: #e2e8f0;
        }

        .search-input::placeholder {
            color: var(--text-light);
        }

        .filter-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.875rem;
        }

        .filter-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        /* Intro Section */
        .intro-section {
            max-width: 1200px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .linee-guida-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--gradient-2024);
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.875rem;
            box-shadow: var(--shadow-medium);
            margin-bottom: 2rem;
            transition: transform 0.3s ease;
        }

        .linee-guida-badge:hover {
            transform: translateY(-2px);
        }

        .intro-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 3rem;
            box-shadow: var(--shadow-large);
            border: 1px solid var(--border-light);
        }

        body.dark .intro-card {
            background: rgba(30, 41, 59, 0.95);
            border-color: var(--border-dark);
        }

        .intro-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .intro-box {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            padding: 2rem;
            border-radius: 16px;
            border-left: 4px solid var(--civic-red);
            transition: all 0.3s ease;
        }

        body.dark .intro-box {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-left-color: var(--civic-gold);
        }

        .intro-box:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-medium);
        }

        .intro-box.new-2024 {
            border-left-color: var(--new-2024);
            position: relative;
        }

        .intro-box.new-2024::after {
            content: 'NUOVO 2024';
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--gradient-2024);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            font-size: 0.6rem;
            font-weight: 700;
        }

        /* Main Grid */
        .map-container {
            position: relative;
            min-height: 600px;
            padding: 4rem 2rem;
            transform-origin: center center;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            max-width: 1600px;
            margin: 0 auto;
        }

        .category-node {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--border-light);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-medium);
        }

        body.dark .category-node {
            background: rgba(30, 41, 59, 0.95);
            border-color: var(--border-dark);
        }

        .category-node:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-large);
            border-color: var(--civic-red);
        }

        .category-node.new-2024::after {
            content: 'NUOVO 2024';
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--gradient-2024);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            font-size: 0.6rem;
            font-weight: 700;
            z-index: 10;
        }

        .category-icon {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 1.5rem;
            display: block;
        }

        .category-title {
            font-size: 1.25rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.75rem;
            color: var(--text-dark);
        }

        body.dark .category-title {
            color: #e2e8f0;
        }

        .category-count {
            text-align: center;
            color: var(--text-light);
            font-weight: 500;
            font-size: 0.875rem;
        }

        .category-preview {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-light);
            text-align: center;
        }

        body.dark .category-preview {
            border-top-color: var(--border-dark);
        }

        .preview-text {
            font-size: 0.75rem;
            color: var(--text-light);
            font-style: italic;
        }

        /* Tools Panel */
        .tools-panel {
            position: fixed;
            top: 0;
            right: -100%;
            width: min(600px, 100vw);
            height: 100vh;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-left: 1px solid var(--border-light);
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            z-index: 2000;
            box-shadow: var(--shadow-large);
        }

        body.dark .tools-panel {
            background: rgba(15, 23, 42, 0.98);
            border-left-color: var(--border-dark);
        }

        .tools-panel.open {
            right: 0;
        }

        .tools-header {
            padding: 2rem;
            background: var(--gradient-civic);
            color: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .tools-content {
            padding: 2rem;
        }

        .tool-item {
            background: var(--light-card);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-light);
            transition: all 0.3s ease;
            position: relative;
        }

        body.dark .tool-item {
            background: var(--dark-card);
            border-color: var(--border-dark);
        }

        .tool-item:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-medium);
            border-color: var(--civic-red);
        }

        .tool-item.new-2024::before {
            content: 'NUOVO 2024';
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--gradient-2024);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-size: 0.6rem;
            font-weight: 700;
        }

        .tool-name {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        body.dark .tool-name {
            color: #e2e8f0;
        }

        .tool-description {
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
        }

        .tool-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--gradient-civic);
            color: white;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }

        .tool-link:hover {
            background: var(--gradient-2024);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Stats */
        .stats-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-medium);
            text-align: center;
            min-width: 140px;
        }

        body.dark .stats-container {
            background: rgba(30, 41, 59, 0.95);
            border-color: var(--border-dark);
        }

        .stats-number {
            font-size: 2.5rem;
            font-weight: 800;
            background: var(--gradient-civic);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stats-label {
            font-size: 0.75rem;
            color: var(--text-light);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 0.5rem;
        }

        .legend {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-medium);
            font-size: 0.875rem;
            line-height: 1.6;
            max-width: 300px;
        }

        body.dark .legend {
            background: rgba(30, 41, 59, 0.95);
            border-color: var(--border-dark);
            color: #e2e8f0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .tools-panel { width: 100%; }
            .search-wrapper { min-width: 240px; }
            .controls-container { top: 1rem; right: 1rem; }
            .search-container { top: 1rem; left: 1rem; flex-direction: column; gap: 0.5rem; }
            .category-grid { grid-template-columns: 1fr; gap: 1.5rem; }
            .intro-section { margin: 2rem auto; padding: 0 1rem; }
            .intro-card { padding: 2rem; }
            .intro-grid { grid-template-columns: 1fr; gap: 1.5rem; }
            .legend, .stats-container { position: relative; margin: 1rem; bottom: auto; left: auto; right: auto; }
            .map-container { padding: 2rem 1rem; }
            .header-content { padding: 0 1rem; }
        }

        @media (max-width: 480px) {
            .search-wrapper { min-width: 200px; }
            .control-btn { width: 40px; height: 40px; font-size: 1rem; }
            .filter-btn { padding: 0.5rem 1rem; font-size: 0.75rem; }
            .category-node { padding: 1.5rem; }
            .category-icon { font-size: 2.5rem; }
            .category-title { font-size: 1.125rem; }
        }

        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fadeInUp 0.6s ease-out;
        }
    </style>
</head>
<body>
    <!-- Main App - Sempre visibile -->
    <div>
        <div class="header">
            <div class="header-content">
                <div class="school-badge">
                    🏛️ IIS MENDEL • EDUCAZIONE CIVICA
                    <div class="update-badge">
                        ✨ AGGIORNATO 2024
                    </div>
                </div>
                <h1>🏛️ Piattaforma AI Educazione Civica</h1>
                <p>Strumenti di Intelligenza Artificiale per la Cittadinanza Digitale - Linee Guida 2024</p>
            </div>
        </div>

        <div class="intro-section">
            <div style="text-align: center;">
                <div class="linee-guida-badge">
                    🇮🇹 LINEE GUIDA 2024 • L. 92/2019 • MINISTERO ISTRUZIONE E MERITO
                </div>
            </div>
            
            <div class="intro-card">
                <h2 style="text-align: center; font-size: 2rem; margin-bottom: 1rem; color: var(--text-dark);">Educazione Civica IIS Mendel - Edizione 2024</h2>
                
                <p style="text-align: center; font-size: 1.125rem; margin-bottom: 2rem; color: var(--text-light); line-height: 1.6;">
                    La nostra piattaforma, <strong>aggiornata alle Linee Guida 2024</strong>, rappresenta il supporto digitale 
                    più avanzato per l'insegnamento dell'<strong>Educazione Civica</strong> con <strong>strumenti AI</strong> 
                    per <strong>Costituzione</strong>, <strong>Cittadinanza Digitale</strong> e <strong>Sviluppo Sostenibile</strong>.
                </p>

                <div class="intro-grid">
                    <div class="intro-box">
                        <h3 style="color: var(--civic-red); font-size: 1.25rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            📜 I Tre Nuclei Fondamentali
                        </h3>
                        <p style="color: var(--text-light); line-height: 1.6;">
                            <strong>1. Costituzione</strong> - diritto, legalità, solidarietà, <em>appartenenza e Patria</em><br>
                            <strong>2. Sviluppo sostenibile</strong> - tutela ambientale (art. 9), economia circolare, patrimonio<br>
                            <strong>3. Cittadinanza digitale</strong> - AI, cybersecurity, contrasto fake news
                        </p>
                    </div>

                    <div class="intro-box new-2024">
                        <h3 style="color: var(--new-2024); font-size: 1.25rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            🚨 Novità 2024
                        </h3>
                        <p style="color: var(--text-light); line-height: 1.6;">
                            <strong>Educazione stradale</strong> e sicurezza • <strong>Educazione finanziaria</strong> 
                            e assicurativa • <strong>Contrasto bullismo/cyberbullismo</strong> • 
                            <strong>Violenza di genere</strong> • <strong>Dipendenze digitali</strong> • 
                            <strong>Educazione alimentare</strong> e sport
                        </p>
                    </div>

                    <div class="intro-box">
                        <h3 style="color: var(--civic-gold); font-size: 1.25rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            🤖 Integrazione AI Responsabile
                        </h3>
                        <p style="color: var(--text-light); line-height: 1.6;">
                            Strumenti AI per analisi costituzionali, simulazioni democratiche, 
                            ricerca verificata e progetti sostenibili. <strong>Uso etico e trasparente</strong> 
                            dell'intelligenza artificiale per l'apprendimento civico.
                        </p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 2rem; padding: 1.5rem; background: rgba(139, 92, 246, 0.1); border-radius: 16px; border: 1px solid rgba(139, 92, 246, 0.2);">
                    <p style="color: var(--new-2024); font-weight: 600; margin: 0;">
                        ⚡ <strong>Metodologia 2024:</strong> 33 ore annuali di educazione civica trasversale 
                        con strumenti AI, progetti territoriali, service learning e competenze digitali 
                        per la cittadinanza del futuro.
                    </p>
                </div>
            </div>
        </div>

        <div class="search-container">
            <div class="search-wrapper">
                <span style="color: var(--text-light); font-size: 1.125rem;">🔍</span>
                <input type="text" class="search-input" placeholder="Cerca strumenti per educazione civica 2024..." id="searchInput">
            </div>
            <button class="filter-btn" onclick="toggleFilters()">Filtri 2024</button>
        </div>

        <div class="controls-container">
            <div class="control-group">
                <button class="control-btn theme-toggle" onclick="toggleTheme()" title="Cambia tema">
                    <span id="themeIcon">🌙</span>
                </button>
            </div>
            <div class="control-group">
                <button class="control-btn" onclick="zoomIn()">+</button>
                <button class="control-btn" onclick="zoomOut()">−</button>
                <button class="control-btn" onclick="resetZoom()">⌂</button>
            </div>
        </div>

        <div class="map-container" id="mapContainer">
            <div class="category-grid" id="categoryGrid">
                <!-- Le categorie verranno generate dinamicamente -->
            </div>
        </div>

        <div class="tools-panel" id="toolsPanel">
            <div class="tools-header">
                <button class="close-btn" onclick="closePanel()">×</button>
                <h3 id="panelTitle">Strumenti Educazione Civica 2024</h3>
                <p id="panelSubtitle" style="margin: 0; opacity: 0.8; font-size: 0.875rem;">Seleziona una categoria</p>
            </div>
            <div class="tools-content" id="toolsContent">
                <!-- Gli strumenti verranno caricati dinamicamente -->
            </div>
        </div>

        <div class="legend">
            <strong style="color: var(--civic-red);">📋 Piattaforma 2024:</strong><br>
            • Aggiornata alle nuove Linee Guida<br>
            • Strumenti AI per educazione civica<br>
            • 33 ore annuali trasversali<br>
            • Focus su sostenibilità e digitale<br>
            • Metodologie innovative certificate
        </div>

        <div class="stats-container">
            <div class="stats-number" id="totalTools">0</div>
            <div class="stats-label">Strumenti<br>Ed. Civica<br>2024</div>
        </div>
    </div>

    <script>
        // DATI COMPLETI EDUCAZIONE CIVICA 2024 - Aggiornati alle nuove Linee Guida
        const aiData = {
            "Costituzione e Diritto - Patria e Appartenenza": {
                icon: "⚖️",
                color: "#dc2626",
                isNew2024: true,
                tools: [
                    {name: "Constitute Project", link: "https://www.constituteproject.org/", description: "Database interattivo con tutte le costituzioni del mondo per analisi comparative e studio dell'appartenenza nazionale.", isNew2024: false},
                    {name: "ChatGPT Analisi Costituzionale", link: "https://chat.openai.com/", description: "Prompts specializzati per analizzare art. 1-12 Costituzione, concetto di Patria (art. 52) e principi fondamentali.", isNew2024: true},
                    {name: "Claude Diritto Costituzionale", link: "https://claude.ai/", description: "AI per approfondimenti su sovranità popolare, separazione dei poteri e ordinamento della Repubblica.", isNew2024: false},
                    {name: "Perplexity Ricerca Giuridica", link: "https://www.perplexity.ai/", description: "Ricerca con fonti verificate su giurisprudenza costituzionale e decisioni della Corte Costituzionale.", isNew2024: false},
                    {name: "Gazzetta Ufficiale AI Search", link: "https://www.gazzettaufficiale.it/", description: "Ricerca intelligente nelle normative italiane con focus su educazione civica e cittadinanza.", isNew2024: true},
                    {name: "Parlamento Italiano - Iter Legislativo", link: "https://www.parlamento.it/", description: "Piattaforma per seguire l'iter delle leggi e partecipazione democratica giovanile.", isNew2024: false},
                    {name: "Corte Costituzionale - Sentenze", link: "https://www.cortecostituzionale.it/", description: "Database delle decisioni costituzionali con sistema di ricerca avanzato.", isNew2024: false},
                    {name: "Senato Ragazzi 2024", link: "https://www.senatoperiragazzi.it/", description: "Simulazioni di democrazia partecipativa e laboratori di cittadinanza attiva.", isNew2024: true}
                ]
            },
            "Cittadinanza Digitale e AI Responsabile": {
                icon: "🤖",
                color: "#3b82f6",
                isNew2024: true,
                tools: [
                    {name: "AI Act UE - Regolamentazione", link: "https://artificialintelligenceact.eu/", description: "Guida completa al Regolamento europeo sull'intelligenza artificiale per uso educativo responsabile.", isNew2024: true},
                    {name: "DigComp 2.2 Framework", link: "https://joint-research-centre.ec.europa.eu/digcomp_en", description: "Quadro europeo delle competenze digitali per cittadini con focus su AI e pensiero critico.", isNew2024: true},
                    {name: "Have I Been Pwned", link: "https://haveibeenpwned.com/", description: "Verifica violazioni di sicurezza dei dati personali e educazione alla cybersecurity.", isNew2024: false},
                    {name: "Generazioni Connesse", link: "https://www.generazioniconnesse.it/", description: "Safer Internet Centre Italia per contrasto a cyberbullismo e uso consapevole della rete.", isNew2024: true},
                    {name: "Privacy e GDPR per Studenti", link: "https://www.garanteprivacy.it/", description: "Risorse educative su protezione dati personali e diritti digitali dei minori.", isNew2024: true},
                    {name: "Fake News Detection AI", link: "https://www.bufale.net/", description: "Strumenti AI per riconoscere disinformazione e sviluppare spirito critico digitale.", isNew2024: true},
                    {name: "Digital Wellbeing Tools", link: "https://wellbeing.google/", description: "Strumenti per gestione tempo digitale e prevenzione dipendenze da dispositivi.", isNew2024: true},
                    {name: "Signal - Crittografia", link: "https://signal.org/", description: "Messaggistica crittografata per comprendere privacy e comunicazioni sicure.", isNew2024: false}
                ]
            },
            "Sviluppo Sostenibile e Tutela Ambientale": {
                icon: "🌍",
                color: "#10b981",
                isNew2024: true,
                tools: [
                    {name: "UN SDGs Tracker AI", link: "https://sdg-tracker.org/", description: "Monitoraggio AI degli Obiettivi di Sviluppo Sostenibile con focus su educazione e ambiente.", isNew2024: true},
                    {name: "Climate Interactive C-ROADS", link: "https://www.climateinteractive.org/", description: "Simulatore climatico per comprendere impatto delle politiche ambientali globali.", isNew2024: false},
                    {name: "Carbon Footprint Calculator", link: "https://www.carbonfootprint.com/calculator.aspx", description: "Calcolatore AI dell'impronta di carbonio personale e scolastica con suggerimenti sostenibili.", isNew2024: true},
                    {name: "Global Forest Watch", link: "https://www.globalforestwatch.org/", description: "Monitoraggio in tempo reale delle foreste mondiali con tecnologie satellitari e AI.", isNew2024: false},
                    {name: "Economia Circolare EU", link: "https://ec.europa.eu/environment/circular-economy/", description: "Risorse UE su economia circolare e Green Deal europeo per sostenibilità.", isNew2024: true},
                    {name: "PlantNet AI", link: "https://plantnet.org/", description: "Identificazione AI di piante per progetti di biodiversità e citizen science.", isNew2024: false},
                    {name: "Protezione Civile Scuola", link: "https://www.protezionecivile.gov.it/", description: "Materiali educativi su prevenzione rischi e cultura della protezione civile.", isNew2024: true},
                    {name: "NASA Climate Kids", link: "https://climatekids.nasa.gov/", description: "Risorse NASA per comprendere cambiamenti climatici e soluzioni sostenibili.", isNew2024: false}
                ]
            },
            "Educazione Stradale e Sicurezza": {
                icon: "🚦",
                color: "#f59e0b",
                isNew2024: true,
                tools: [
                    {name: "Patente.it Educazione Stradale", link: "https://www.patente.it/", description: "Piattaforma per apprendimento delle norme stradali e cultura della sicurezza.", isNew2024: true},
                    {name: "ACI Didattica Stradale", link: "https://www.aci.it/", description: "Materiali educativi ACI per sensibilizzazione sui rischi della strada.", isNew2024: true},
                    {name: "Simulatore Guida Sicura", link: "https://www.sicurstrada.it/", description: "Simulatori virtuali per comprendere dinamiche incidenti e comportamenti corretti.", isNew2024: true},
                    {name: "Alcol e Droghe - Effetti Guida", link: "https://www.salute.gov.it/", description: "Risorse ministeriali su effetti di sostanze psicotrope nella guida.", isNew2024: true},
                    {name: "Polizia Stradale Scuole", link: "https://www.poliziadistato.it/", description: "Progetti educativi della Polizia Stradale per la sicurezza dei giovani.", isNew2024: true},
                    {name: "Codice della Strada Digitale", link: "https://www.mit.gov.it/", description: "Versione digitale e commentata del Codice della Strada italiano.", isNew2024: true},
                    {name: "Safe Cycling AI", link: "https://www.bikeitalia.it/", description: "App AI per sicurezza ciclisti e mobilità sostenibile urbana.", isNew2024: true},
                    {name: "Incidentalità Stradale Database", link: "https://www.istat.it/", description: "Dati ISTAT su incidenti stradali per analisi statistiche e prevenzione.", isNew2024: true}
                ]
            },
            "Educazione Finanziaria e Previdenziale": {
                icon: "💰",
                color: "#06b6d4",
                isNew2024: true,
                tools: [
                    {name: "Banca d'Italia - Educazione Finanziaria", link: "https://www.bancaditalia.it/servizi-cittadino/cultura-finanziaria/", description: "Programmi ufficiali di educazione finanziaria con simulatori digitali.", isNew2024: true},
                    {name: "CONSOB Investor Education", link: "https://www.consob.it/web/investor-education", description: "Strumenti per comprendere mercati finanziari e investimenti responsabili.", isNew2024: true},
                    {name: "INPS Giovani", link: "https://www.inps.it/", description: "Piattaforma per comprendere sistema previdenziale e pianificazione del futuro.", isNew2024: true},
                    {name: "FEduF - Educazione Finanziaria", link: "https://www.feduf.it/", description: "Fondazione per l'Educazione Finanziaria con laboratori interattivi per studenti.", isNew2024: true},
                    {name: "Budget Planning Simulator", link: "https://www.practicalmoneyskills.com/", description: "Simulatori per pianificazione budget familiare e gestione risorse.", isNew2024: true},
                    {name: "Cryptocurrency Education", link: "https://www.bancaditalia.it/", description: "Educazione su valute digitali, rischi e opportunità del fintech.", isNew2024: true},
                    {name: "Insurance Literacy", link: "https://www.ivass.it/", description: "Educazione assicurativa per comprendere protezione e gestione rischi.", isNew2024: true},
                    {name: "Tax Education for Youth", link: "https://www.agenziaentrate.gov.it/", description: "Educazione fiscale e comprensione del sistema tributario italiano.", isNew2024: true}
                ]
            },
            "Contrasto Violenza di Genere": {
                icon: "⚡",
                color: "#ef4444",
                isNew2024: true,
                tools: [
                    {name: "DiRe Donne in Rete", link: "https://www.direcontrolaviolenza.it/", description: "Rete nazionale antiviolenza con materiali educativi per prevenzione nelle scuole.", isNew2024: true},
                    {name: "1522 Antiviolenza", link: "https://www.1522.eu/", description: "Numero nazionale antiviolenza e stalking con risorse educative.", isNew2024: true},
                    {name: "Respect Education", link: "https://www.rispetto.org/", description: "Programmi educativi per relazioni rispettose e parità di genere.", isNew2024: true},
                    {name: "Gender Equality EU", link: "https://eige.europa.eu/", description: "Istituto europeo per l'uguaglianza di genere con dati e strumenti educativi.", isNew2024: true},
                    {name: "Stereotipi di Genere", link: "https://www.unric.org/", description: "Risorse ONU per decostruire stereotipi e promuovere inclusione.", isNew2024: true},
                    {name: "Cyberstalking Prevention", link: "https://www.savethechildren.it/", description: "Prevenzione violenza digitale e stalking online tra adolescenti.", isNew2024: true},
                    {name: "Codice Rosa Network", link: "https://www.salute.toscana.it/", description: "Protocolli sanitari per riconoscimento e contrasto della violenza.", isNew2024: true},
                    {name: "Men for Gender Equality", link: "https://www.unwomen.org/", description: "Coinvolgimento maschile nella lotta contro la violenza di genere.", isNew2024: true}
                ]
            },
            "Dipendenze e Benessere Digitale": {
                icon: "🧠",
                color: "#8b5cf6",
                isNew2024: true,
                tools: [
                    {name: "Gaming Disorder WHO", link: "https://www.who.int/", description: "Risorse OMS su dipendenza da gaming e disturbi correlati ai videogiochi.", isNew2024: true},
                    {name: "Social Media Detox", link: "https://www.centrodigitaleunifi.it/", description: "Strumenti per gestione tempo sui social e prevenzione dipendenze digitali.", isNew2024: true},
                    {name: "Ser.D. Dipendenze", link: "https://www.salute.gov.it/", description: "Servizi per le Dipendenze con focus su nuove dipendenze comportamentali.", isNew2024: true},
                    {name: "Cyberdipendenza Test", link: "https://www.iss.it/", description: "Test di autovalutazione ISS per riconoscere dipendenze da internet.", isNew2024: true},
                    {name: "Digital Wellness Toolkit", link: "https://digitalwellnesslab.org/", description: "Toolkit per promuovere benessere digitale e uso consapevole della tecnologia.", isNew2024: true},
                    {name: "Gambling Prevention", link: "https://www.aams.gov.it/", description: "Prevenzione gioco d'azzardo problematico tra i giovani.", isNew2024: true},
                    {name: "NoSlot Movement", link: "https://www.noslot.it/", description: "Movimento contro slot machine e sensibilizzazione sui rischi del gioco.", isNew2024: true},
                    {name: "Mindfulness Apps Review", link: "https://www.mindsight.com/", description: "Recensioni app per mindfulness e gestione stress da tecnologia.", isNew2024: true}
                ]
            },
            "Educazione Alimentare e Sport": {
                icon: "🍎",
                color: "#22c55e",
                isNew2024: true,
                tools: [
                    {name: "Sport e Salute SpA", link: "https://www.sportesalute.eu/", description: "Società pubblica per promozione sport e stili di vita sani nelle scuole.", isNew2024: true},
                    {name: "CREA Nutrizione", link: "https://www.crea.gov.it/", description: "Centro Ricerca Alimenti e Nutrizione per educazione alimentare scientifica.", isNew2024: true},
                    {name: "Okkio alla Salute", link: "https://www.epicentro.iss.it/okkioallasalute/", description: "Sistema di sorveglianza ISS su nutrizione e attività fisica in età scolare.", isNew2024: true},
                    {name: "MyPlate Nutrition", link: "https://www.myplate.gov/", description: "Piattaforma USA per educazione nutrizionale adattata al contesto italiano.", isNew2024: false},
                    {name: "Slow Food Education", link: "https://www.slowfood.it/", description: "Progetti educativi su alimentazione sostenibile e biodiversità.", isNew2024: true},
                    {name: "WADA Anti-Doping", link: "https://www.wada-ama.org/", description: "Educazione anti-doping e fair play nello sport giovanile.", isNew2024: true},
                    {name: "Obesity Prevention", link: "https://www.salute.gov.it/", description: "Programmi ministeriali per prevenzione obesità infantile e adolescenziale.", isNew2024: true},
                    {name: "Paralympic Education", link: "https://www.paralympic.org/", description: "Valori paralympici per inclusione e superamento delle barriere.", isNew2024: true}
                ]
            },
            "Istituzioni Europee e Mondo Globale": {
                icon: "🇪🇺",
                color: "#2563eb",
                isNew2024: false,
                tools: [
                    {name: "European Parliament Youth", link: "https://www.europarl.europa.eu/", description: "Programmi giovanili del Parlamento Europeo per cittadinanza attiva europea.", isNew2024: true},
                    {name: "Council of Europe Democracy", link: "https://www.coe.int/", description: "Consiglio d'Europa per democrazia e diritti umani con toolkit educativi.", isNew2024: false},
                    {name: "Erasmus+ Programme", link: "https://erasmus-plus.ec.europa.eu/", description: "Piattaforma per progetti europei di mobilità e cooperazione educativa.", isNew2024: false},
                    {name: "eTwinning Plus", link: "https://www.etwinning.net/", description: "Gemellaggio elettronico per progetti collaborativi europei.", isNew2024: false},
                    {name: "EU Digital Single Market", link: "https://digital-single-market.ec.europa.eu/", description: "Iniziative UE per mercato unico digitale e diritti digitali.", isNew2024: true},
                    {name: "Green Deal Education", link: "https://ec.europa.eu/info/strategy/priorities-2019-2024/european-green-deal_en", description: "Educazione al Green Deal europeo per transizione ecologica.", isNew2024: true},
                    {name: "United Nations SDGs", link: "https://www.un.org/sustainabledevelopment/", description: "Obiettivi di Sviluppo Sostenibile ONU con focus su educazione di qualità.", isNew2024: false},
                    {name: "World Bank EdTech", link: "https://www.worldbank.org/", description: "Banca Mondiale per tecnologie educative e sviluppo globale.", isNew2024: false}
                ]
            },
            "Legalità e Contrasto alle Mafie 2.0": {
                icon: "⚖️",
                color: "#dc2626",
                isNew2024: true,
                tools: [
                    {name: "Libera Memoria", link: "https://www.libera.it/", description: "Database vittime di mafia con storytelling digitale e progetti di memoria.", isNew2024: true},
                    {name: "Addiopizzo Digital", link: "https://www.addiopizzo.org/", description: "App per consumo critico e sostegno alle imprese che dicono no al pizzo.", isNew2024: true},
                    {name: "DIA Intelligence", link: "https://direzioneinvestigativaantimafia.interno.gov.it/", description: "Rapporti semestrali DIA con analisi del fenomeno mafioso contemporaneo.", isNew2024: true},
                    {name: "ANAC Whistleblowing", link: "https://www.anticorruzione.it/", description: "Piattaforma per segnalazioni anticorruzione e trasparenza amministrativa.", isNew2024: true},
                    {name: "Beni Confiscati Mappa", link: "https://www.benisequestraticonfiscati.it/", description: "Mappa interattiva dei beni confiscati alle mafie e loro riutilizzo sociale.", isNew2024: true},
                    {name: "Magistratura Democratica", link: "https://www.magistraturademocratica.it/", description: "Risorse su giustizia e legalità per educazione civica avanzata.", isNew2024: true},
                    {name: "Centro Pio La Torre", link: "https://www.piolatorre.it/", description: "Osservatorio sulla criminalità organizzata con dati e analisi aggiornate.", isNew2024: false},
                    {name: "Falcone Borsellino Digital", link: "https://www.fondazionefalcone.org/", description: "Eredità digitale dei magistrati per nuove generazioni.", isNew2024: true}
                ]
            }
        };

        // Variabili globali
        let totalTools = 0;
        let currentZoom = 1;
        let isDarkMode = false;

        // Funzioni principali
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark', isDarkMode);
            document.getElementById('themeIcon').textContent = isDarkMode ? '☀️' : '🌙';
            localStorage.setItem('mendel_darkMode_edcivica_2024', isDarkMode);
        }

        function zoomIn() {
            currentZoom = Math.min(currentZoom * 1.2, 3);
            updateZoom();
        }

        function zoomOut() {
            currentZoom = Math.max(currentZoom / 1.2, 0.3);
            updateZoom();
        }

        function resetZoom() {
            currentZoom = 1;
            updateZoom();
        }

        function updateZoom() {
            document.getElementById('mapContainer').style.transform = `scale(${currentZoom})`;
        }

        function initializeMap() {
            const categoryGrid = document.getElementById('categoryGrid');
            const categories = Object.keys(aiData);
            
            totalTools = 0;
            categories.forEach(category => {
                totalTools += aiData[category].tools.length;
            });
            
            categoryGrid.innerHTML = '';
            
            categories.forEach((category, index) => {
                const categoryNode = document.createElement('div');
                categoryNode.className = 'category-node animate-fade-in';
                if (aiData[category].isNew2024) {
                    categoryNode.classList.add('new-2024');
                }
                categoryNode.style.animationDelay = `${index * 0.1}s`;
                categoryNode.onclick = () => openCategory(category);
                
                const toolsPreview = aiData[category].tools.slice(0, 3).map(tool => tool.name).join(', ');
                const newToolsCount = aiData[category].tools.filter(tool => tool.isNew2024).length;
                const newBadge = newToolsCount > 0 ? ` • ${newToolsCount} nuovi 2024` : '';
                
                categoryNode.innerHTML = `
                    <div class="category-icon">${aiData[category].icon}</div>
                    <div class="category-title">${category}</div>
                    <div class="category-count">${aiData[category].tools.length} strumenti${newBadge}</div>
                    <div class="category-preview">
                        <div class="preview-text">${toolsPreview}...</div>
                    </div>
                `;
                
                categoryGrid.appendChild(categoryNode);
            });
            
            document.getElementById('totalTools').textContent = totalTools;
        }

        function openCategory(categoryName) {
            const panel = document.getElementById('toolsPanel');
            const title = document.getElementById('panelTitle');
            const subtitle = document.getElementById('panelSubtitle');
            const content = document.getElementById('toolsContent');
            
            const categoryData = aiData[categoryName];
            const newToolsCount = categoryData.tools.filter(tool => tool.isNew2024).length;
            
            title.textContent = categoryName;
            subtitle.textContent = `${categoryData.tools.length} strumenti disponibili • ${newToolsCount} nuovi 2024`;
            
            content.innerHTML = '';
            
            categoryData.tools.forEach((tool) => {
                const toolItem = document.createElement('div');
                toolItem.className = 'tool-item';
                if (tool.isNew2024) {
                    toolItem.classList.add('new-2024');
                }
                
                toolItem.innerHTML = `
                    <div class="tool-name">🔧 ${tool.name}</div>
                    <div class="tool-description">${tool.description}</div>
                    <a href="${tool.link}" target="_blank" rel="noopener noreferrer" class="tool-link">
                        🚀 Accedi al Strumento
                    </a>
                `;
                
                content.appendChild(toolItem);
            });
            
            panel.classList.add('open');
        }

        function closePanel() {
            document.getElementById('toolsPanel').classList.remove('open');
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase().trim();
                filterCategories(searchTerm);
            });
        }

        function filterCategories(searchTerm) {
            const categoryNodes = document.querySelectorAll('.category-node');
            
            categoryNodes.forEach(node => {
                const categoryTitle = node.querySelector('.category-title').textContent.toLowerCase();
                const categoryName = Object.keys(aiData).find(cat => cat.toLowerCase() === categoryTitle);
                
                let isVisible = false;
                
                if (searchTerm === '' || searchTerm === '2024') {
                    isVisible = true;
                    if (searchTerm === '2024') {
                        isVisible = aiData[categoryName]?.isNew2024 || 
                                   aiData[categoryName]?.tools.some(tool => tool.isNew2024);
                    }
                } else {
                    if (categoryTitle.includes(searchTerm)) {
                        isVisible = true;
                    } else if (categoryName) {
                        isVisible = aiData[categoryName].tools.some(tool =>
                            tool.name.toLowerCase().includes(searchTerm) ||
                            tool.description.toLowerCase().includes(searchTerm)
                        );
                    }
                }
                
                if (isVisible) {
                    node.style.display = 'block';
                    node.style.opacity = '1';
                    node.style.transform = 'scale(1)';
                } else {
                    node.style.opacity = '0.3';
                    node.style.transform = 'scale(0.95)';
                }
            });
        }

        function toggleFilters() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput.value === '2024') {
                searchInput.value = '';
                filterCategories('');
            } else {
                searchInput.value = '2024';
                filterCategories('2024');
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Tema salvato
            const savedTheme = localStorage.getItem('mendel_darkMode_edcivica_2024');
            if (savedTheme === 'true') {
                toggleTheme();
            }
            
            // Inizializza la mappa
            initializeMap();
            setupSearch();
        });

        // Chiudi pannello quando si clicca fuori
        document.addEventListener('click', (e) => {
            const panel = document.getElementById('toolsPanel');
            const isClickInsidePanel = panel.contains(e.target);
            const isClickOnCategoryNode = e.target.closest('.category-node');
            
            if (!isClickInsidePanel && !isClickOnCategoryNode && panel.classList.contains('open')) {
                closePanel();
            }
        });
    </script>
</body>
</html>